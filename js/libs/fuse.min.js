/**
 * @license
 * Fuse - Lightweight fuzzy-search
 *
 * Copyright (c) 2012 Kirollos Risk <kirollos@gmail.com>.
 * All Rights Reserved. Apache Software License 2.0
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){function n(t,e){this.list=t,this.options=e=e||{},this.options.sort="sort"in e?e.sort:n.defaultOptions.sort,this.options.includeScore="includeScore"in e?e.includeScore:n.defaultOptions.includeScore,this.options.searchFn=e.searchFn||n.defaultOptions.searchFn,this.options.sortFn=e.sortFn||n.defaultOptions.sortFn,this.options.keys=e.keys||n.defaultOptions.keys}var e=function(t,n){if(this.options=n||{},this.options.location=n.location||e.defaultOptions.location,this.options.distance="distance"in n?n.distance:e.defaultOptions.distance,this.options.threshold="threshold"in n?n.threshold:e.defaultOptions.threshold,this.options.maxPatternLength=n.maxPatternLength||e.defaultOptions.maxPatternLength,this.pattern=n.caseSensitive?t:t.toLowerCase(),this.patternLen=t.length,this.patternLen>this.options.maxPatternLength)throw new Error("Pattern length is too long");this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet()};e.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},e.prototype._calculatePatternAlphabet=function(){var t={},n=0;for(n=0;n<this.patternLen;n++)t[this.pattern.charAt(n)]=0;for(n=0;n<this.patternLen;n++)t[this.pattern.charAt(n)]|=1<<this.pattern.length-n-1;return t},e.prototype._bitapScore=function(t,n){var e=t/this.patternLen,i=Math.abs(this.options.location-n);return this.options.distance?e+i/this.options.distance:i?1:e},e.prototype.search=function(t){if(t=this.options.caseSensitive?t:t.toLowerCase(),this.pattern===t)return{isMatch:!0,score:0};var n,e,i,o,s,r,a,h,p,c=t.length,l=this.options.location,u=this.options.threshold,f=t.indexOf(this.pattern,l),d=this.patternLen+c,m=1,L=[];for(-1!=f&&(u=Math.min(this._bitapScore(0,f),u),f=t.lastIndexOf(this.pattern,l+this.patternLen),-1!=f&&(u=Math.min(this._bitapScore(0,f),u))),f=-1,n=0;n<this.patternLen;n++){for(i=0,o=d;o>i;)this._bitapScore(n,l+o)<=u?i=o:d=o,o=Math.floor((d-i)/2+i);for(d=o,s=Math.max(1,l-o+1),r=Math.min(l+o,c)+this.patternLen,a=Array(r+2),a[r+1]=(1<<n)-1,e=r;e>=s;e--)if(p=this.patternAlphabet[t.charAt(e-1)],a[e]=0===n?(a[e+1]<<1|1)&p:(a[e+1]<<1|1)&p|((h[e+1]|h[e])<<1|1)|h[e+1],a[e]&this.matchmask&&(m=this._bitapScore(n,e-1),u>=m)){if(u=m,f=e-1,L.push(f),!(f>l))break;s=Math.max(1,2*l-f)}if(this._bitapScore(n+1,l)>u)break;h=a}return{isMatch:f>=0,score:m}};var i={deepValue:function(t,n){for(var e=0,n=n.split("."),i=n.length;i>e;e++){if(!t)return null;t=t[n[e]]}return t}};n.defaultOptions={id:null,caseSensitive:!1,includeScore:!1,shouldSort:!0,searchFn:e,sortFn:function(t,n){return t.score-n.score},keys:[]},n.prototype.search=function(t){var n,e,o,s,r,a=new this.options.searchFn(t,this.options),h=this.list,p=h.length,c=this.options.keys,l=c.length,u=[],f={},d=[],m=function(t,n,e){void 0!==t&&null!==t&&"string"==typeof t&&(s=a.search(t),s.isMatch&&(r=f[e],r?r.score=Math.min(r.score,s.score):(f[e]={item:n,score:s.score},u.push(f[e]))))};if("string"==typeof h[0])for(var n=0;p>n;n++)m(h[n],n,n);else for(var n=0;p>n;n++)for(o=h[n],e=0;l>e;e++)m(i.deepValue(o,c[e]),o,n);this.options.shouldSort&&u.sort(this.options.sortFn);for(var L=this.options.includeScore?function(t){return u[t]}:function(t){return u[t].item},S=this.options.id?function(t){return i.deepValue(L(t),options.id)}:function(t){return L(t)},n=0,g=u.length;g>n;n++)d.push(S(n));return d},"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):t.Fuse=n}(this);